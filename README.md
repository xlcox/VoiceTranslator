# Voice Translator with SoundPad Integration

## Проект: Голосовой переводчик с воспроизведением через SoundPad

### Описание проекта

Приложение для перевода голосовой речи в реальном времени с последующим воспроизведением переведенного текста через систему SoundPad. Программа записывает аудио с микрофона по горячей клавише, распознает речь, переводит текст на целевой язык, синтезирует речь и воспроизводит результат одновременно через динамики и виртуальный микрофон.

### Архитектура системы

#### Структура проекта
```
├── main.py                 # Точка входа приложения
├── requirements.txt        # Зависимости Python
├── config.json            # Файл конфигурации
├── core/                  # Основные модули
│   ├── config.py          # Управление конфигурацией
│   ├── logger_config.py   # Настройка логирования
│   ├── soundpad_manager.py # Управление SoundPad
│   └── voice_translator.py # Основная логика перевода
└── logs/                  # Директория для логов
```

#### Основные компоненты

1. **Main (main.py)** - Инициализация и запуск приложения, обработка исключений, управление жизненным циклом.

2. **Конфигурация (core/config.py)** - Централизованное управление настройками через JSON-файл. Автоматически создает конфиг при первом запуске, поддерживает рекурсивное объединение с настройками по умолчанию.

3. **Логирование (core/logger_config.py)** - Единая система логирования с выводом в файл и консоль. Поддерживает UTF-8, создает директорию для логов автоматически.

4. **SoundPad Manager (core/soundpad_manager.py)** - Управление подключением и воспроизведением через SoundPad. Поддерживает автозапуск SoundPad, воспроизведение в динамики и микрофон одновременно, очистку временных файлов.

5. **Голосовой переводчик (core/voice_translator.py)** - Основной модуль обработки. Содержит подсистемы:
   - AudioCapture: захват аудио с микрофона
   - SpeechRecognition: преобразование аудио в текст через Whisper
   - TextTranslation: перевод через Google Translator
   - SpeechSynthesis: синтез речи через Edge TTS
   - HotkeyManager: управление горячей клавишей

#### Поток данных

1. Пользователь нажимает и удерживает горячую клавишу (по умолчанию Page Up)
2. Система начинает запись аудио с микрофона
3. При отпускании клавиши запись останавливается
4. Аудио передается в Whisper для распознавания речи
5. Распознанный текст переводится на целевой язык (по умолчанию с русского на китайский)
6. Переведенный текст синтезируется в речь с заданными параметрами голоса
7. Полученное аудио воспроизводится через SoundPad в динамики и микрофон одновременно

### Технические особенности

- **Асинхронная архитектура**: Использует asyncio для неблокирующей обработки
- **Многопоточность**: Воспроизведение выполняется в отдельном потоке
- **Отказоустойчивость**: Корректная обработка ошибок на всех этапах с детальным логированием
- **Гибкая конфигурация**: Все параметры настраиваются через JSON-файл
- **Поддержка китайского языка**: Оптимизировано для перевода на китайский с правильной кодировкой иероглифов

### Конфигурация

Приложение использует JSON-конфигурацию с секциями:
- **app**: уровень логирования и горячая клавиша
- **audio**: параметры аудиозаписи
- **translation**: языки и модель распознавания
- **tts**: параметры синтеза речи
- **soundpad**: настройки SoundPad и каналов воспроизведения

### Требования

- Python 3.8+
- Установленный SoundPad
- Микрофон и звуковая карта
- Доступ в интернет для работы переводчика и синтеза речи